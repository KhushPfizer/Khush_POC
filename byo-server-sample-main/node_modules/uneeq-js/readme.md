# uneeq-js
This package is for use inside web projects to establish a live session with a digital human.

## Usage and Documentation:
https://docs.uneeq.io/build-your-own-experience

#### Installation Notes
To use uneeq-js with a typescript version < 3.8, 'skipLibCheck' must be set to true.

## Release Notes
#### 2.58.0
* Fix for enabling microphone multiple times.

#### 2.57.0
* Fixed an issue that blocked microphone access after recieving a transcript with no speech.

#### 2.56.0
* Increased speech recognition audio buffer size and changed audio buffer overflow to soft reset instead of ending the session.

#### 2.55.2
* Improved handling of 16001 errors when using speech recognition when interruptions are blocked.

#### 2.55.1
* Fixed an issue that prevented users from speaking after unmuting during the digital humans speech, when using enableInterruptBySpeech = true.

#### 2.55.0
* Added a new option 'enableInterrupt' that can be used to enable interruption of the digital human. The default value is false, users cannot interrupt the digital human.

#### 2.54.1
* Fixed an edge case that caused the digital human to stop speaking when a blank STT result was received.

#### 2.54.0
* Re-enabled echoCancellation and fixed an issue that caused speech recognition to perform poorly in high latency environments.

#### 2.53.0
* Disabled echoCancellation due to performance issues.

#### 2.52.0
* Stop the digital human from speaking when engaging push to talk.

#### 2.51.0
* Added speechRecognitionHintPhrasesBoost to allow implementers to boost the chance of hint phrase words matching.

#### 2.50.1
* Fixed an edge case that caused speech to not be sent when using enableVad = false.

#### 2.50.0
* Added enableVad as an option which can be used to disable automated voice activity detection.

#### 2.49.2
* Fixed an issue that caused enableMicrophone(false) to error.

#### 2.49.1
* Fixed an issue that caused partial SpeechTranscriptionMessages to be sent.

#### 2.49.0
* Moved Speech Recognition out of beta and into general availability.

#### 2.48.2
* Speech Recognition: Fixed a bug that caused unmuteDigitalHuman to cause an error.

#### 2.48.1
* Speech Recognition: This feature will no longer auto enable the microphone on session start. Instead developers should call enableMicrophone(true) themselves when they want to allow the user to use speech recognition. Note, this will prompt the user for microphone access permissions if they have not given it already.

#### 2.48.0
* Add client and custom metadata that is sent during chats with a digital human. Developers can specify anything they wish in the custom metadata using the new function setCustomChatMetadata.

#### 2.47.11
* Speech Recognition: Bug fix: Pausing recording during active speech causes recognition state to be lost.

#### 2.47.10
* Speech Recognition: Added support for reconnecting speech recognition upon disconnection.

#### 2.47.9
* Speech Recognition: Send DevicePermissionGranted message

#### 2.47.8
* Speech Handler: added DeviceErrorMessage when access to microphone is declined.

#### 2.47.7
* added jwt security to speech recognition

#### 2.47.6
* Speech Recognition: added support for pause and resume.

#### 2.47.5
* Speech Recognition mode: Stop the digital human from speaking when an interim speech result is received.

#### 2.47.4
* Fixed a race condition when loading speech recognition assets

#### 2.47.3
* Updated speech recognition scripts to be loaded in a more secure way.

#### 2.47.1
* Updated SPEECH_RECOGNITION mode to record in opus format.

#### 2.47.0
* Added pre-alpha release of speech_recognition input mode.

#### 2.46.7
* Updated dependency versions

#### 2.46.6
* Fix build pipeline

#### 2.46.5
* Dependency version updates

#### 2.46.4
* Improve locale detection to ensure we fall back to supported speech to text languages

#### 2.46.3
* Fix for sessions to start without localStorage availability.

#### 2.46.2
* Fix for session starting in incognito browser windows.

#### 2.46.1
* Tweaking locale detection to better handle null or undefined input

#### 2.46.0
* Adding automatic detection of speech to text language - If no speechToTextLocales set, we will try to automatically detect a users browser language. If we cannot do that, we will fall back to en-US as the default speech to text language.

#### 2.45.0
* Added ability to, when starting a session, specify up to four languages (using locale codes) that a Digital Human should understand

#### 2.44.6
* Fixed an issue when ending a session that would cause newly created sessions to be ended shortly after.

#### 2.44.5
* Fixed issue preventing Firefox based sessions from starting

#### 2.44.4
* Updated voice activity mode to no longer request the users microphone when the session becomes live.

#### 2.44.3
* Fix for DigitalHumanUnmuted message on video play.

#### 2.44.2
* Added DigitalHumanUnmuted message when video plays in unmuted mode.

#### 2.44.1
* Optimized publish stream and improved audio performance on iOS

#### 2.44.0
* Added beta support for session resume.

#### 2.43.0
* Adding support for setting a background image and name tag image when starting a session using new fields in UneeqOptions. Url restrictions apply, please reach out to the Customer Service team.

#### 2.42.3
* Fixed issue that caused voiceActivity input not to work when using autoStart

#### 2.42.2
* Improved responsiveness of RecordingStartedMessage when using VOICE_ACTIVITY input mode.

#### 2.42.1
* Fixed behaviour in Safari so that DigitalHumanPlayedInMutedModeSuccess is emitted when video starts in muted state.
* Added a new message 'DigitalHumanUnmuted'.

#### 2.42.0
* Allow digital human videos that are blocked by browser autoplay policy to be played in muted state without user interaction with the page.

#### 2.41.1
* Fix for VOICE_ACTIVITY disengaging during long utterances.

#### 2.41.0
* Added support for voice activity detection

#### 2.40.2
* Minor tweak to client performance metricing

#### 2.40.1
* Fixed an issue that would sometimes cause a session to start with no video.

#### 2.40.0
* Adds support for upcoming instructions field

#### 2.39.8
* Improvements to support upcoming feature

#### 2.39.7
* Minor fixes to support upcoming feature releases.

#### 2.39.6
* Fixed video scaling issues when running in a low bandwidth environment.
* Fixed an issue that occasionally caused the video stream not to render in Safari 15

#### 2.39.1
* Support for Safari 15

#### 2.39.0
* Adding support for upcoming features

#### 2.38.3
* Improves the quality of the UneeQ watermark for customers in our Starter pricing tier

#### 2.38.1
* Fixed an issue that could cause reconnections to fail.

#### 2.38.0
* Adds support for transparent background

#### 2.37.2
* Adds hasDisplayHtml boolean to AvatarAnswerContentMessage to be able to distinguish inclusion of displayHtml
#### 2.37.0
* Adds client resolution detection to identify screen ratios.

#### 2.36.6
* Improved audio management.

#### 2.36.4
* Added ClientPerformanceMessage to identify if session quality is being impacted by client-side conditions.
* Added enableClientPerformanceMessage option to control the visibility of client-side network performance messages in the developer console.
* Added transcriptId to AvatarAnswerMessage, AvatarAnswerContentMessage and AvatarQuestionMessage to link between a question and an answer.

#### 2.35.0
* Fixed a bug that caused enabling/changing media devices to take a long time to be functional.

#### 2.32.0
* Users who lose network connection for more than 10 seconds will have their session ended and SessionError will occur.

#### 2.31.1
* Resolved an issue that caused Chrome to be very slow to detect network connection lost, and not send ConnectionLost message.

#### 2.31.0
* Add support for stop speaking api
* Add support for AvatarRequestIgnored and AvatarRequestCompleted messages.

#### 2.30.3
* Updated readme and removed post install script.

#### 2.30.0
* Add graceful handling of end sessions messages from websocket - ending the session on the client side.

#### 2.29.2
* Added new messages: StartedSpeakingMessage, FinishedSpeakingMessage and SessionInfoMessage.
* Deprecated message: AvatarTextInputFinishedMessage (use FinishedSpeakingMessage)

#### 2.29.1
* Added the ability to start a session without microphone access and request access to mic/cam mid-session.
* Fixed an issue that caused some iOS devices to experience low volume.
* Fixed an issue that caused some iOS devices to play audio from the wrong speaker.
* *There is a known issue on some iOS devices that can cause audio to crackle when using sendLocalVideo: false with sendLocalAudio: true.*

#### 2.29.0
* Allow for microphone and camera enable/disable.
* *This version has been deprecated due to crackling audio on iOS devices.*

#### 2.28.1
* Fixed a bug which could cause an error when starting a session.

#### 2.28.0
* Added sendLocalVideo: boolean to UneeqOptions. sendLocalVideo: false will not request or publish the users video stream.

#### 2.27.2
* Sending information to indicate if user has denied permission for audio/video device

#### 2.27.1
* Fix for video not playing when changing device (introduced in 2.27.0).

#### 2.27.0
* Addressed SDP issue causing some sessions not to start following Safari update.

#### 2.26.5
* Fix for occasional video freeze on session start.

#### 2.26.4
* Added OnlineStatusUpdateMessage.

#### 2.26.3
* Send media devices availability to the server

#### 2.26.2
* Set websocket reconnection and timeout limits.

#### 2.26.1
* Added timezone to session start request.

#### 2.26.0
* Added ClientMediaStreamUpdate message. Shifted SessionLiveMessage to only send once audio and video are streaming between client and server.

#### 2.25.2
* Added sessionId as a parameter on Uneeq class and log it upon session start.

#### 2.25.1
* Added release notes to readme.

#### 2.25.0
* Update to match faceme-sdk version number + fixes.
